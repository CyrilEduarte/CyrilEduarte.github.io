function toggleActionColumn(containerId, show) {
    const table = document.querySelector(`#${containerId} table`);
    const actionColumns = table.querySelectorAll("td.action-column, th.action-column");

    actionColumns.forEach(col => {
        col.style.display = show ? "" : "none";
    });
}

function copyTableAsImage(containerId, hideActions = false) {
    if (hideActions) toggleActionColumn(containerId, false);
    const tableContainer = document.getElementById(containerId);
    html2canvas(tableContainer).then(canvas => {
        canvas.toBlob(blob => {
            navigator.clipboard.write([new ClipboardItem({ 'image/png': blob })]);
            alert(`Table from ${containerId} copied as an image!`);
        }).finally(() => {
            if (hideActions) toggleActionColumn(containerId, true);
        });
    });
}

function downloadTableAsImage(containerId, hideActions = false) {
    if (hideActions) toggleActionColumn(containerId, false);
    const tableContainer = document.getElementById(containerId);
    html2canvas(tableContainer).then(canvas => {
        const link = document.createElement("a");
        link.download = `${containerId}.png`;
        link.href = canvas.toDataURL("image/png");
        link.click();
    }).finally(() => {
        if (hideActions) toggleActionColumn(containerId, true);
    });
}
